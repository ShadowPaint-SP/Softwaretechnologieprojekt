<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout.html(title=#{dashboard.title})}">

<head></head>

<body>
    <main layout:fragment="input">
        <form th:action="@{/addSeasonalPlot}" method="post">
            class="grid sm:grid-cols-3 grid-flow-row gap-3 container rounded-box bg-base-300 mx-auto justify-center p-4 mt-20">
            <div>
                <label class="label-text">Name: </label>
                <input type="text" placeholder="" class="input input-sm w-full focus:outline-accent"
                       id="name" name="name" required th:value="${first != null ? first.name : ''}"/>
            </div>
            <div>
                <label class="label-text">Größe in m^2: </label>
                <input type="number" placeholder="" class="input input-sm w-full focus:outline-accent"
                       id="size" name="size" min="1" required th:value="${first != null ? first.price.number : '1'}"/>
            </div>
            <div>
                <label class="label-text">Price in € pro Monat: </label>
                <input type="number" placeholder="" class="input input-sm w-full focus:outline-accent"
                       id="price" name="price" step="0.1" min="0.1" required th:value="${first != null ? first.price.number : '1'}"/>
            </div>
            <div>
                <label class="label-text">Parking:</label>
                <select name="parkingValue" class="select select-bordered select-sm w-full">
                    <option value="0" th:text="#{plot.parking.no}" selected></option>
                    <option value="1" th:text="#{plot.parking.bike}"></option>
                    <option value="2" th:text="#{plot.parking.car}"></option>
                    <option value="3" th:text="#{plot.parking.camper}"></option>
                </select>
            </div>
            <div>
                <label class="label-text">Stromzähler: </label>
                <input type="number" placeholder="" class="input input-sm w-full focus:outline-accent"
                       id="electyricitMeter" name="electricityMeter" step="0.1" min="0.1" required th:value="${first != null ? first.price.number : '0'}"/>
            </div>
            <div>
                <label class="label-text">Wasserzähler: </label>
                <input type="number" placeholder="" class="input input-sm w-full focus:outline-accent"
                       id="waterMeter" name="waterMeter" step="0.1" min="0.1" required th:value="${first != null ? first.price.number : '0'}"/>
            </div>
            <div>
                <label class="label-text">Bild: </label>
                <input type="text" placeholder="" class="input input-sm w-full focus:outline-accent"
                       id="imagePath" name="imagePath" required th:value="${first != null ? first.imagePath : ''}"/>
            </div>
            <div>
                <label class="label-text">Description: </label>
                <input type="text" placeholder="" class="input input-sm w-full focus:outline-accent"
                       id="desc" name="desc" required th:value="${first != null ? first.desc : ''}"/>
            </div>
            <div class="flex justify-around">
                <input type="hidden" id="itemId" name="itemId" th:value="${item != null ? item.id : ''}" />
                <button class="btn btn-accent" type="submit">Hinzufügen/Ändern der Dauerstellplätze</button>
            </div>
        </form>
        <div class="overflow-x-auto container mx-auto mt-14 rounded-box">
            <table class="table table-zebra">
                <thead>
                <tr>
                    <th></th>
                    <th th:text="#{plot.name}"></th>
                    <th th:text="#{plot.size}"></th>
                    <th th:text="#{plot.parking}"></th>
                    <th th:text="#{plot.price}"></th>
                    <th th:text="#{plot.description}"></th>
                    <th th:text="#{plot.picture}"></th>
                    <th th:text="#{plot.remove}"></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="plot, iStat : ${allSplot}">
                    <form method="post" action="/management/plots/updatePlot">
                        <td th:text="${iStat.count}">
                            <input type="hidden" name="plotID" th:value="${plot.id}">
                            1
                        </td>
                        <td>
                            <input class="input input-sm w-full focus:outline-accent" type="text" name="name"
                                   th:value="${plot.name}" onchange="this.form.submit()">
                        </td>
                        <td>
                            <input class="input input-sm w-full focus:outline-accent" type="number" name="size"
                                   th:value="${plot.size}" onchange="this.form.submit()">
                        </td>
                        <th>
                            <select name="parkingValue" onchange="this.form.submit()"
                                    class="select select-bordered select-xs w-full max-w-xs">
                                <option value="0" th:selected="${plot.parking.size == 0}" th:text="#{plot.parking.no}"></option>
                                <option value="1" th:selected="${plot.parking.size == 1}" th:text="#{plot.parking.bike}"></option>
                                <option value="2" th:selected="${plot.parking.size == 2}" th:text="#{plot.parking.car}"></option>
                                <option value="3" th:selected="${plot.parking.size == 3}" th:text="#{plot.parking.camper}"></option>
                            </select>
                        </th>
                        <td>
                            <input class="input input-sm w-full focus:outline-accent" type="number" name="price"
                                   th:value="${plot.getPriceDouble()}" onchange="this.form.submit()">
                        </td>
                        <td>
                            <input class="input input-sm w-full focus:outline-accent" type="text" name="description"
                                   th:value="${plot.desc}" onchange="this.form.submit()">
                        </td>
                        <td>
                            <input class="input input-sm w-full focus:outline-accent" type="text" name="picture"
                                   th:value="${plot.imagePath}" onchange="this.form.submit()">
                        </td>
                        <td>
                            <button th:text="#{management.plot.delete}" formaction="/management/plots/deletePlot"
                                    class="btn btn-primary"></button>
                        </td>
                    </form>
                </tr>
                </tbody>
            </table>
        </div>
    </main>
</body>

</html>